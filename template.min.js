var templateEngine={version:"0.4.4",author:"Marc Evans (moridiweb)",load:function(b,c,d,a){var f=$.Deferred();var e=f.promise();e.progress(function(){if(a===undefined){a=false}if(a==true&&d!==undefined){d.html("")}templateEngine.getData(b).then(function(g){b=g;templateEngine.getData(c).then(function(h){c=h;templateEngine.loadData(b,c).then(function(i){if(d!==undefined){if(d.html()!=undefined){d.append(i)}else{console.error("target does not exist");console.error(d)}}f.resolve(i,c)})})})});f.notify();return e},getData:function(a){var c=$.Deferred();var b=c.promise();b.progress(function(){if(!/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(a)){c.resolve(a)}else{if(a.indexOf("{")>-1){c.resolve(a)}else{$.ajax({url:a,error:function(d,f,e){console.log(d)},success:function(d,f,e){c.resolve(d)}})}}});c.notify();return b},loadData:function(a,b){var d=$.Deferred();var c=d.promise();c.progress(function(){if($.type(b)=="array"){var e="";$.each(b,function(f,g){e+=templateEngine.execute(a,g)});d.resolve(e)}else{var e=templateEngine.execute(a,b);d.resolve(e)}});d.notify();return c},execute:function(a,b){return a.replace(/{([^{}]*)}/g,function(d,c){if(c.indexOf(".")>-1&&c.indexOf("$")<0&&c.indexOf(" ")<0&&c.indexOf("\n")<0){var h=c.split(".");var f=b;var e=0;for(var g in f){e++}if(e>0){$.each(h,function(j,i){f=f[i]})}if(typeof f==="string"||typeof f==="number"){return f}else{if(typeof f==="object"){return JSON.stringify(f)}else{return d}}}else{var f=b[c];return typeof f==="string"||typeof f==="number"?f:d}})}};
